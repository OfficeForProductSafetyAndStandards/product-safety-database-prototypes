{% extends "layout-user-testing.html" %}

{% block pageTitle %}
    What is the product category and subcategory
{% endblock %}

{% block beforeContent %}
    {{ govukBackLink({
        text: "Back",
        href: "what-is-the-product-name"
    }) }}
{% endblock %}


{% block content %}

<div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
  <h2 class="govuk-error-summary__title" id="error-summary-title">
    There is a problem
  </h2>
  <div class="govuk-error-summary__body">

    <ul class="govuk-list govuk-error-summary__list">
      <li>
        <a href="#category">Select a category</a>
      </li>      
      <li>
        <a href="#subcategory">Enter a subcategory</a>
      </li>
    </ul>
  </div>
</div>


 <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <h1 class="govuk-heading-l">What is the product category and subcategory?</h1>
    </div>
  </div>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div class="govuk-warning-text">
        <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
        <strong class="govuk-warning-text__text">
          <span class="govuk-warning-text__assistive">Warning</span>
          These two categories will be permanent and cannot be changed after the product record has been created. 
        </strong>
      </div>
    </div>
  </div>


      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">



        <form action="#" method="post" data-fullproductname="{{ data['fullproductname'] }}" data-name="{{ data['productName'] }}" data-model="{{ data['modelName'] }}"  data-modelno="{{ data['modelnumber'] }}" novalidate>

          <input id="checkMatch" name="checkMatch" type="hidden" value="no">
          <input id="theMatch" name="theMatch" type="hidden" value="">


<div class="govuk-form-group govuk-!-margin-bottom-5" data-test-for="select" data-test-ele-name="category">
  <label class="govuk-label govuk-label--s" for="category">
    Product category
  </label>



  <div id="category-hint" class="govuk-hint govuk-!-font-size-16">
    Select a category. <!--br>Coronavirus  (COVID-19) categories <abbr>PPE</abbr> and Hand sanitiser have now been added.-->
  </div>

  <span id="category-error" class="govuk-error-message">
    <span class="govuk-visually-hidden">Error:</span> Select a category
  </span>

<select class="govuk-select" id="category" name="category" aria-describedby="category-hint">
<option value="" selected></option>
<option value="Personal protective equipment (PPE)">Personal protective equipment (PPE)</option>
<option value="Hand sanitiser">Hand sanitiser</option>
<option value="Chemical products">Chemical products</option>
<option value="Childcare articles and children's equipment">Childcare articles and children's equipment</option>
<option value="Clothing, textiles and fashion items">Clothing, textiles and fashion items</option>
<option value="Communication and media equipment">Communication and media equipment</option>
<option value="Construction products">Construction products</option>
<option value="Cosmetics">Cosmetics</option>
<option value="Decorative articles">Decorative articles</option>
<option value="Eco-design">Eco-design</option>
<option value="Electrical appliances and equipment">Electrical appliances and equipment</option>
<option value="Explosive atmospheres equipment">Explosive atmospheres equipment</option>
<option value="Food-imitating products">Food-imitating products</option>
<option value="Furniture">Furniture</option>
<option value="Gadgets">Gadgets</option>
<option value="Gas appliances and components">Gas appliances and components</option>
<option value="Hand tools">Hand tools</option>
<option value="Hobby / sports equipment">Hobby / sports equipment</option>
<option value="Jewellery">Jewellery</option>
<option value="Kitchen / cooking accessories">Kitchen / cooking accessories</option>
<option value="Laser pointers">Laser pointers</option>
<option value="Lifts">Lifts</option>
<option value="Lighters">Lighters</option>
<option value="Lighting chains">Lighting chains</option>
<option value="Lighting equipment">Lighting equipment</option>
<option value="Machinery">Machinery</option>
<option value="Measuring instruments">Measuring instruments</option>
<option value="Motor vehicles (including spare parts)">Motor vehicles (including spare parts)</option>
<option value="Pressure equipment / vessels">Pressure equipment / vessels</option>
<option value="Pyrotechnic articles">Pyrotechnic articles</option>
<option value="Rail and guided transport">Rail and guided transport</option>
<option value="Recreational crafts">Recreational crafts</option>
<option value="Stationery">Stationery</option>
<option value="Toys">Toys</option>
<option value="Waste">Waste</option>
<option value="Other">Other</li>
</select>
</div>




<div class="govuk-form-group" data-test-for="input" data-test-ele-name="subcategory">
  <label class="govuk-label govuk-label--s" for="subcategory">
    Product subcategory
  </label>

  <div id="subcategory-hint" class="govuk-hint govuk-!-font-size-16">
    Enter a descriptive subcategory. For example, Washing machine, Shampoo or Necklace.
  </div>

  <span id="subcategory-error" class="govuk-error-message">
    <span class="govuk-visually-hidden">Error:</span> Enter a subcategory
  </span>

  <input class="govuk-input govuk-!-width-one-half" id="subcategory" name="subcategory" type="text" spellcheck="false" aria-describedby="subcategory-hint">
</div>








<button class="govuk-button" data-module="govuk-button">
  Continue
</button>



      </form>


    </div>
  </div>


{% endblock %}

{% block bodyEnd %}

  {% block scripts %}
    {% include "includes/scripts-testing.html" %}
    {% block pageScripts %}
    {% endblock %}
  {% endblock %}

<script>
  jQuery(document).ready(function(){

    var theForm = $('#main-content').find('form');

    setMenuState('products');
    validateTheForm(theForm);

    $('#checkMatch').val('no');
    $('#theMatch').val('');
    var v1 = theForm.data("fullproductname");
    if(!v1){v1 = '----'; }
    var v2 = theForm.data("name");
    if(!v2){v2 = '----'; }
    var v3 = theForm.data("model");
    if(!v3){v3 = '----'; }
    var v4 = theForm.data("modelno");
    if(!v4){v4 = '----'; }

    var regex = new RegExp(v1, "i");
    var regex2 = new RegExp(v2, "i");
    var regex3 = new RegExp(v3, "i");
    var regex4 = new RegExp(v4, "i");

    function itmatched(id){
      $('#checkMatch').val('yes');
      $('#theMatch').val(id);
    }

    $('#main-content').find('.govuk-select').click(function(){

      $.each(data, function(key, val) {

          if (val.full_prod_name.search(regex) != -1) {
            itmatched(val.id);
            return false;
          } else if ((val.name.search(regex2) != -1) || (val.model.search(regex3) != -1)) {
            itmatched(val.id);
            return false;
          } else if (val.prod_modelno.search(regex4) != -1) {
            itmatched(val.id);
            return false;
          }

      });

    });





  });
</script>

{% endblock %}